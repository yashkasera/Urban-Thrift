<!DOCTYPE html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCShltEjBvlNT5uPnam4nXSLuCUyQQPx3w",
            authDomain: "thrift-it-6292f.firebaseapp.com",
            databaseURL: "https://thrift-it-6292f.firebaseio.com",
            projectId: "thrift-it-6292f",
            storageBucket: "thrift-it-6292f.appspot.com",
            messagingSenderId: "349474094670",
            appId: "1:349474094670:web:72e88ee219b10a689a8d1f",
            measurementId: "G-19WP7K4Y1V"
        };
        firebase.initializeApp(firebaseConfig);
        let db = firebase.firestore();
        let auth = firebase.auth();</script>

    <title>Urban-Thrift | My Profile</title>
    <meta charset="UTF-8">
    <meta name="description" content=" UrbanThrift | My Profile">
    <meta name="keywords" content="urbanthrift, eCommerce, shirts, trousers,pants,contact">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="img/favicon.ico" rel="shortcut icon"/>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css"/>
</head>

<body>
<!-- Header section -->
<header>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a href="home.html" class="navbar-brand">
                <img src="img/logo.png">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
                    aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="d-flex">
                <div class="collapse navbar-collapse" id="navbarScroll">
                    <ul class="navbar-nav me-4 my-2 my-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="home.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="category.html">Categories</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="sell_now.html">Sell Now</a>
                        </li>
                        <li class="nav-item" id="login">
                            <a class="nav-link" href="login.html">Login</a>
                        </li>
                        <li id="signup">
                            <a href="sign_up.html">
                                <button class="btn btn-primary"><i class="flaticon-profile"></i> Sign Up</button>
                            </a>
                        </li>
                        <li class="nav-item dropdown" id="profile">
                            <a class="nav-link dropdown-toggle active" role="button" data-bs-toggle="dropdown"
                               aria-expanded="false">
                                Profile
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="./my_bids.html">My Bids</a></li>
                                <li><a class="dropdown-item" href="./my_orders.html">My Orders</a></li>
                                <li><a class="dropdown-item" href="./my_listings.html">My Listings</a></li>

                                <li><a class="dropdown-item active" href="./my_profile.html">My Account</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#" onclick="logout()">Logout</a></li>
                            </ul>
                        </li>
                        <li class="nav-item" id="cart">
                            <a class="btn btn-primary" href="my_watchlist.html">
                                <i class="fa-solid fa-chart-line"></i><span id="watchlist-count" class="badge"></span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
</header>
<!-- Header section end -->

<!-- Page info end --><br>
<section class="mt-5">
    <div class="container">
        <div class="d-flex flex-row">
            <div class="col-md-6 col-xs-12 col-sm-6">
                <div class="pix-content pix-radius-3">
                    <h2 class="pix-black-gray-dark pix-no-margin-bottom">
						<span class="pix_edit_text">Name
							<button type="button" class="site-btn sb-line sb-dark" onclick="editDetails()"
                                    style="float: right;"><i
                                    class="fa fa-edit"></i>&nbsp;&nbsp;Edit Details</button>
                        </span>
                    </h2>
                    <br>
                    <form name="SignUp" method="post" onsubmit="updateUser()">
                        <div class="form-group">
                            <label for="email">*Name:</label>
                            <input type="text" class="form-control" id="name" placeholder="Enter name" name="name"
                                   required disabled>
                        </div>
                        <div class="form-group">
                            <label for="email">*Email:</label>
                            <input type="email" class="form-control" id="email" placeholder="Enter email" name="email"
                                   required disabled>
                        </div>
                        <div class="form-group">
                            <label for="mobile">*Mobile No.:</label>
                            <input type="number" class="form-control" id="mobile" placeholder="Enter Mobile Number"
                                   name="mobile" required disabled>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6">
                                <label>*Address:</label>
                                <input type="text" class="form-control" id="address" placeholder="Enter Address"
                                       name="address" required disabled>
                            </div>
                            <div class="col-sm-6">
                                <label>*City:</label>
                                <input type="text" class="form-control" id="city" placeholder="Enter City" name="city"
                                       required disabled>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6">
                                <label for="state">Select State:</label>
                                <select name="state" id="state" class="form-control" required disabled>
                                    <option value="select" disabled selected>Select One</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                                    <option value="Daman and Diu">Daman and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>
                            </div>
                            <div class="col-sm-6">
                                <label>*PINCODE:</label>
                                <input type="text" class="form-control" id="pin" placeholder="Enter PINCODE" name="pin"
                                       disabled>
                            </div>
                        </div>

                        <p align="right">* - Required</p>
                        <center>
                            <button type="submit" class="site-btn form-control" id="updateBtn"
                                    style="display: none;">Update Details
                            </button>
                        </center>
                        <label id="error" style="display:none" class="ui-state-error">*ERROR</label>
                    </form>
                    <br><br>
                </div>
            </div>
            <div class="col-md-6 col-xs-12 col-sm-6">
                <div class="d-flex flex-column justify-content-around h-100 p-5 card ms-5 bg-gray">
                    <a href="./my_orders.html" class="link-none">
                        <div class="card col-3 p-2 text-center w-100">
                            <h2><i class="fa-solid fa-chart-line"></i></h2>
                            <div class="container">
                                <h4 id="count_orders">0 Orders</h4>
                            </div>
                        </div>
                    </a>
                    <a href="my_bids.html" class="link-none">
                        <div class="card col-3 p-2 text-center w-100">
                            <h2><i class="flaticon-push-pin"></i></h2>
                            <div class="container">
                                <h4 id="count_wishlist">0 Wishlist</h4>
                            </div>
                        </div>
                    </a>
                    <a href="my_watchlist.html" class="link-none">
                        <div class="card  col-3 p-2 text-center w-100">
                            <h2><i class="flaticon-push-pin"></i></h2>
                            <div class="container">
                                <h4 id="count_cart">0 Cart</h4>
                            </div>
                        </div>
                    </a>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- Footer section -->
<footer class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <div class="footer-widget about-widget">
                    <h2>About</h2>
                    <p>At Urban Thrift, we aim to make buying sustainable fashion convenient and affordable. With
                        multiple quality inspections, product assurance and stress on buying comfort, you can be
                        confident about buying from Thrift stores across the country!</p>
                    <img src="img/cards.png" alt="" style="width:auto; height:10%">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="footer-widget about-widget">
                    <h2>Info</h2>
                    <ul>
                        <li><a href="./about_us.html">About Us</a></li>
                        <li><a href="./FAQs.html">FAQs</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer section end -->
<div id="snackbar"></div>
<script>
    let acc = document.getElementsByClassName("accordion");
    for (let i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            let panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            }
        });
    }
    let storedData = localStorage.getItem("cart");

    items = JSON.parse(storedData);
    console.log(items);
    if (items != null)
        document.getElementById("count_cart").innerHTML = items.length + " Cart";

    function updateUser() {
        event.preventDefault();
        let uid = auth.currentUser.uid;
        let name = document.getElementById("name").value;
        let mobile = document.getElementById("mobile").value;
        let address = document.getElementById("address").value;
        let city = document.getElementById("city").value;
        let state = document.getElementById("state").value;
        let pin = document.getElementById("pin").value;
        let obj = {address: address, city: city, state: state, pincode: pin};
        db.collection("users").doc(uid).update({
            name: name,
            mobile: mobile,
            address: obj
        })
    }

    function editDetails() {
        document.getElementById("name").disabled = false;
        document.getElementById("mobile").disabled = false;
        document.getElementById("address").disabled = false;
        document.getElementById("city").disabled = false;
        document.getElementById("state").disabled = false;
        document.getElementById("pin").disabled = false;
        document.getElementById("updateBtn").style.display = "block";
    }

    let myInput = document.getElementById("pwd1");
    let letter = document.getElementById("letter");
    let capital = document.getElementById("capital");
    let number = document.getElementById("number");
    let length = document.getElementById("length");
    myInput.onfocus = function () {
        document.getElementById("message").style.display = "block";
    }
    myInput.onblur = function () {
        document.getElementById("message").style.display = "none";
    }
    let flag = 0;
    myInput.onkeyup = function () {
        flag = 0;
        let lowerCaseLetters = /[a-z]/g;
        if (myInput.value.match(lowerCaseLetters)) {
            flag++;
            letter.classList.remove("invalid");
            letter.classList.add("valid");
        } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
        }
        let upperCaseLetters = /[A-Z]/g;
        if (myInput.value.match(upperCaseLetters)) {
            flag++;
            capital.classList.remove("invalid");
            capital.classList.add("valid");
        } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
        }
        let numbers = /[0-9]/g;
        if (myInput.value.match(numbers)) {
            flag++;
            number.classList.remove("invalid");
            number.classList.add("valid");
        } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
        }
        if (myInput.value.length >= 8) {
            flag++;
            length.classList.remove("invalid");
            length.classList.add("valid");
        } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
        }
    }

    function changePassword() {
        event.preventDefault();
        let pwd = document.getElementById("pwd").value;
        let pwd1 = document.getElementById("pwd1").value;
        let pwd2 = document.getElementById("pwd2").value;
        if (flag != 4) {
            document.getElementById("error1").innerHTML = "*Please choose a strong password";
            document.getElementById("error1").style.display = "block";
        } else {
            if (pwd1 != pwd2) {
                document.getElementById("error1").innerHTML = "*Passwords do not match";
                document.getElementById("error1").style.display = "block";
            } else {
                let user = firebase.auth().currentUser;
                let credentials = firebase.auth.EmailAuthProvider.credential(
                    user.email,
                    pwd
                );
                user.reauthenticateWithCredential(credentials)
                    .then(function () {
                        user.updatePassword(pwd1).then(function () {
                            // Update successful.
                            alert("Password updated successfully");
                        }).then(function () {
                            window.location.reload();
                        }).catch(function (error) {
                            document.getElementById("error1").innerHTML = error.message;
                            document.getElementById("error1").style.display = "block";
                        });
                    })
                    .catch(function (error) {
                        document.getElementById("error1").innerHTML = "*Incorrect Password";
                        document.getElementById("error1").style.display = "block";
                    });
            }
        }
        setTimeout(function () {
            document.getElementById("error1").style.display = "none";
        }, 3000);
    }
</script>

<!--====== Javascripts & Jquery ======-->
<script src="js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/978e5c8e46.js" crossorigin="anonymous"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="js/main.js"></script>
<script src="js/auth.js"></script>

</body>

</html>